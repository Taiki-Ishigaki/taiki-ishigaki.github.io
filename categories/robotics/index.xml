<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>robotics | atlab</title>
    <link>/categories/robotics/</link>
      <atom:link href="/categories/robotics/index.xml" rel="self" type="application/rss+xml" />
    <description>robotics</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><lastBuildDate>Mon, 16 Dec 2019 00:00:00 +0000</lastBuildDate>
    <image>
      <url>/img/icon-192.png</url>
      <title>robotics</title>
      <link>/categories/robotics/</link>
    </image>
    
    <item>
      <title>Use of ROS</title>
      <link>/post/tips/robotics/ros/ros-tips/</link>
      <pubDate>Mon, 16 Dec 2019 00:00:00 +0000</pubDate>
      <guid>/post/tips/robotics/ros/ros-tips/</guid>
      <description>&lt;h2 id=&#34;初めてのros&#34;&gt;初めてのROS&lt;/h2&gt;

&lt;p&gt;rosがインストール完了しているとして&lt;/p&gt;

&lt;h3 id=&#34;ワークスペースの作成と設定&#34;&gt;ワークスペースの作成と設定&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;任意の名前のワークスペース(例~/catkin_ws)ディレクトリとその中にsrcディレクトリを作成する&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;mkdir ~/catkin_ws/src&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;catkinワークスペースとして初期化&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;cd ~/catkin_ws/src
catkin_init_workspace&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ワークスペースのビルド&lt;br&gt;
ワークスペース直下にbuildディレクトリとdevelディレクトリが生成&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;cd ~/catkin_ws
catkin_make&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;環境変数の設定&lt;br&gt;
環境変数「$ROS_PACKAGE_PATH」に自分のワークスペースを追加する&lt;br&gt;
ワークスペースを変更したときに毎回行う必要あり&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;source ~/catkin_ws/devel/setup.bash&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ワークスペースの環境変数を自動で読み込むようにする
新たにターミナルを起動しても自動で環境変数を読み込むように&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;source ~/catkin_ws/devel/setup.bash&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; ~/.bashrc&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;catkin&#34;&gt;catkin&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://catkin-tools.readthedocs.io/en/latest/installing.html&#34;&gt;参考ページ&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;rviz&#34;&gt;RViz&lt;/h2&gt;

&lt;p&gt;シミュレータではない，ROSでシミュレータを使いたいならGazebo&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;rosrun rviz rviz&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;で起動する，「/opt/ros/kinematic/bin」にパスが通っているなら以下のコマンドで省略可能&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;rviz&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;tf&#34;&gt;tf&lt;/h2&gt;

&lt;p&gt;ブロードキャスタとリスナ
tfはリスナの問い合わせに対してブロードキャストによって得られる情報から2フレーム間の相対位置を求める&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ブロードキャスト
異なる2フレーム間の相対位置を配信&lt;/li&gt;
&lt;li&gt;リスナ
異なる2フレーム間の相対位置を取得&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;ブロードキャスト&#34;&gt;ブロードキャスト&lt;/h3&gt;

&lt;h4 id=&#34;コード&#34;&gt;コード&lt;/h4&gt;

&lt;p&gt;StaticTransformBroadcasterとTransformBroadcasterに2種類がある&lt;/p&gt;

&lt;h4 id=&#34;ツール&#34;&gt;ツール&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;rosrun tf2ros static_transform_publisher x y z yaw pitch roll frame_id child_frame_id&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;もしくは&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;rosrun tf2ros static_transform_publisher x y z qx qy qz qw frame_id child_frame_id&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;rqt&#34;&gt;rqt&lt;/h2&gt;

&lt;h3 id=&#34;robot-steering&#34;&gt;Robot Steering&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;rqt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Plugins-&amp;gt;Robot Tools-&amp;gt;Robot Steering
トピック名を変更&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>優先度付き微分逆運動学</title>
      <link>/post/documents/robotics/task_priority/</link>
      <pubDate>Wed, 09 Oct 2019 00:00:00 +0000</pubDate>
      <guid>/post/documents/robotics/task_priority/</guid>
      <description>&lt;h2 id=&#34;準備&#34;&gt;準備&lt;/h2&gt;

&lt;h3 id=&#34;順運動学と微分順運動学&#34;&gt;順運動学と微分順運動学&lt;/h3&gt;

&lt;p&gt;$x \in \mathbb{R}^{m}$ と リンク系の状態を示す一般化座標$q \in \mathbb{R}^{n}$&lt;/p&gt;

&lt;p&gt;順運動学&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
x = f(q) \tag{1}
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;微分順運動学&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\dot{x} = J(q) \dot{q} \tag{2}
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;ここで$J(q) = \frac{\partial f}{\partial q} \in \mathbb{R}^{m \times n}$&lt;/p&gt;

&lt;h2 id=&#34;微分逆運動学&#34;&gt;微分逆運動学&lt;/h2&gt;

&lt;p&gt;$m &amp;lt; n$で冗長な時，式(1)の一般解，微分逆運動学の式は&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\dot{q} = J^{\sharp} \dot{x} + N y \tag{3}
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;ここで$J^{\sharp}$は$J$の擬似逆行列で$N$は任意のベクトルを$J(\theta)$のヌルスペースに写像する行列で$y$は任意のベクトル．&lt;/p&gt;

&lt;h2 id=&#34;優先度付き微分逆運動学&#34;&gt;優先度付き微分逆運動学&lt;/h2&gt;

&lt;p&gt;制御を行なう上で実現させたい量(手先の位置や速度，角運動量など)をタスクと呼ぶ．この時，そのタスクは式(1)のように一般化座標で表すことができるためタスクを実現するために一般化座標について解きロボットを制御する．&lt;/p&gt;

&lt;p&gt;ここでそのタスクが優先度を持って与えられたとする．タスク$x_i (i = 1, ... n)$，ここでタスクのインデックスが小さいほど優先順位が高いとする．&lt;/p&gt;

&lt;p&gt;高い優先度のタスクを式(3)の微分逆運動学で実現し，$J_i$のヌルスペースでより低い優先度のタスクを実現する．[1]&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\dot{x_i} = J_i \dot{q}
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\dot{q} = {J_i}^{\sharp} \dot{x_i} + N_i y \tag{4}
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\dot{x_{i+1}} = J_{i+1} \dot{q} \tag{5}
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;式(4)，(5)を同時に満たす，$y$を求める．(5)式に(4)式を代入すると&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\dot{x_{i+1}} = J_{i+1} {J_i}^{\sharp} \dot{x_i} + J_{i+1} N_i y
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
y =  (J_{i+1} N_i )^{\sharp} (\dot{x_{i+1}} - J_{i+1} {J_i}^{\sharp} \dot{x_i}) + N_{i+1} z
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;ここで優先度順で解いた時に，漸化式によって分解でき以下のような一般解となる．[2]&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\rm{for} \  i = i \  \rm{to} \  N
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\dot{q_i} = \dot{q_{i-1}} + (J_i N_{i-1})^{\sharp} (\dot{x_i} - J_i \dot{q_{i-1}})
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
N_i = N_{i-1} - (J_i N_{i_1})^{\sharp}(J_i N_{i_1})
\]&lt;/span&gt;&lt;/p&gt;

&lt;h2 id=&#34;reference&#34;&gt;Reference&lt;/h2&gt;

&lt;p&gt;[1]: Y.Nakamura, et al. (1987) &amp;quot;Task-Priority Based Redundancy Control of Robot Manipulators&amp;quot;&lt;br&gt;
[2]: B.Siciliano, J-J E. Slotine (1991) &amp;quot;A General Framework for Managing Multiple Tasks in Highly Redundant Robotic Systems&amp;quot;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>重心動力学</title>
      <link>/post/documents/robotics/centroidal_dynamics/</link>
      <pubDate>Sun, 22 Sep 2019 00:00:00 +0000</pubDate>
      <guid>/post/documents/robotics/centroidal_dynamics/</guid>
      <description>&lt;h2 id=&#34;剛体の運動方程式&#34;&gt;剛体の運動方程式&lt;/h2&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
m_i \ddot{p_{G_i}} = \hat{f_i} + \sum_j f_{i, j} - m_i g \tag{1}
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\dot{L_i} = \hat{\tau_i} + \sum_j \tau_{i, j} \tag{2}
\]&lt;/span&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;$m_i$ : 剛体の質量&lt;br&gt;&lt;/li&gt;
&lt;li&gt;$p_{G_i}$ : 剛体の重心位置&lt;br&gt;&lt;/li&gt;
&lt;li&gt;$L_i$ : 剛体の重心まわりの角運動量&lt;br&gt;&lt;/li&gt;
&lt;li&gt;$\hat{f_i}$ : 剛体に働く外力&lt;/li&gt;
&lt;li&gt;$\hat{\tau_i}$ : 剛体に働く重心まわりのモーメント&lt;/li&gt;
&lt;li&gt;$f_{i, j}$ : 剛体間に働く力&lt;/li&gt;
&lt;li&gt;$\tau_{i, j}$ : 剛体間に働くモーメント&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;多体系の重心の運動方程式&#34;&gt;多体系の重心の運動方程式&lt;/h2&gt;

&lt;p&gt;剛体$l_i$($i = 1, ... n$)からなる多体系の重心に関する運動方程式を導出する.&lt;/p&gt;

&lt;p&gt;まず, 重心$ p_G $を定義する.&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
p_G = \frac{1}{m} \sum_i m_i p_{G_i} \tag{3}
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;ここで$m$は剛体の全質量である.&lt;/p&gt;

&lt;p&gt;重心の運動量は&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
H_G = m \dot{p_G} \tag{4}
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;重心に関する運動方程式は運動量の時間変化から(1),(4)式より以下のように求まる&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\dot{H_G} = m \ddot{p_G} = \sum_i m_i \ddot{p_{G_i}}
= \sum_i (\hat{f_i} + \sum_j f_{i,j} - m_i g)
= \sum_i \hat{f_i}  - m g
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
m \ddot{p_G} = \sum_i \hat{f_i}  - m g \tag{5}
\]&lt;/span&gt;&lt;/p&gt;

&lt;h2 id=&#34;多体系の重心周りの角運動量に関する運動方程式&#34;&gt;多体系の重心周りの角運動量に関する運動方程式&lt;/h2&gt;

&lt;p&gt;多体系の重心周りの角運動量に関する運動方程式を導出する.&lt;/p&gt;

&lt;p&gt;重心周りの角運動量は&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
L_G = \sum_i (L_i + (p_{G_i} - p_G) \times m_i \dot{p_i}) \tag{6}
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;重心周りの角運動量に関する運動方程式は角運動量の時間変化から(2), (6)式より以下のように求まる&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\dot{L_G} = \sum_i (\dot{L_i} + (\dot{p_{G_i}} - \dot{p_G}) \times m_i \dot{p_i} + (p_{G_i} - p_G) \times m_i \ddot{p_i}) = \sum_i(\hat{\tau_i} + (p_{G_i} - p_G) \times \hat{f_i})
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\dot{L_G} = \sum_i(\hat{\tau_i} + (p_{G_i} - p_G) \times \hat{f_i}) \tag{7}
\]&lt;/span&gt;&lt;/p&gt;

&lt;h2 id=&#34;接触レンチcontact-wrench&#34;&gt;接触レンチ(contact wrench)&lt;/h2&gt;

&lt;p&gt;並進力成分とモーメント成分を合わせた6次元ベクトル&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\left[
\begin{array}{rr}
f_c \\
\tau_c \\
\end{array}
\right] =
\left[
\begin{array}{rr}
\sum_i \hat{f_i} \\
\sum_i(\hat{\tau_i} + p_{G_i} \times \hat{f_i}\\
\end{array}
\right]
\]&lt;/span&gt;&lt;/p&gt;

&lt;h2 id=&#34;重心の運動方程式&#34;&gt;重心の運動方程式&lt;/h2&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\begin{cases}
m \ddot{p_G} = f_c - mg \\
\dot{L} = \tau_c - p_G \times f_c
\end{cases}
\]&lt;/span&gt;&lt;/p&gt;

&lt;h2 id=&#34;appendix&#34;&gt;Appendix&lt;/h2&gt;

&lt;h3 id=&#34;作用反作用の法則&#34;&gt;作用・反作用の法則&lt;/h3&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
f_{i, j} = - f_{j, i}
\]&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span  class=&#34;math&#34;&gt;\[
\tau_{i, j} + p_i \times f_{i, j} = - (\tau_{j, i} + p_j \times f_{j_i})
\]&lt;/span&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
